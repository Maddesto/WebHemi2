SetEnvIf Host .*\.dev APPLICATION_ENV=dev

Options -Indexes

<IfModule mod_expires.c>
    # Enable expirations
    ExpiresActive On
    # Default directive
    ExpiresDefault "access plus 1 week"
    # Favicon
    ExpiresByType image/x-icon "access plus 1 month"
    # Images
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    # CSS
    ExpiresByType text/css "access 1 month"
    # Javascript
    ExpiresByType application/javascript "access plus 1 month"
</IfModule>

<IfModule mod_rewrite.c>
    # Enable rewrites
    RewriteEngine On

    # Protect application with redeirect to invalid route
    RewriteCond %{REQUEST_URI} !\.html$
    RewriteRule ^wh_application/?(.*)$ /wh_application/$1.html [R,L]

    # Fix routes with adding trailing slash
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !\.[a-z0-9]{2,4}$
    RewriteCond %{REQUEST_URI} !(.+)/$
    RewriteRule ^(.+)$ /$1/ [L,R=301]

    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]

    # Redirect everything to the entry point
    RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::\2$
    RewriteRule ^(.*) - [E=BASE:%1]
    RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L]
</IfModule>